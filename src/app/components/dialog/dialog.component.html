<app-ui-loading *ngIf="loadingSpinner"></app-ui-loading>
<div *ngIf="!loadingSpinner">
  <div *ngIf="isCreateNewFaList">
    <h1 mat-dialog-title>Add new Favorite Playlist</h1>
    <div mat-dialog-content>
      <mat-form-field class="width-100 my-form-field">
        <input matInput placeholder="Playlist Name" [(ngModel)]="name">
      </mat-form-field>
    </div>
    <div mat-dialog-content class="d-flex justify-content-between align-items-center">
      <input type="file" (change)="onFileSelected($event)" accept="image/*" class="display-none" #openFile>
      <span>Choose Image: </span>
      <button mat-mini-fab class="my-form-field margin-5">
        <mat-icon class="material-icons color-dark-blue" (click)="openFile.click()">attach_file</mat-icon>
      </button>
    </div>
    <div mat-dialog-content *ngIf="haveImage">
      <div class="labelPreviewImage">
        <span class="loadImageName color-yellow">{{loadImage.name}}</span>
      </div>
      <div class="containerPreview position-relative">
        <img src="{{imagePreview}}" class="imagePreview" alt="preview">
      </div>

    </div>
    <div mat-dialog-actions>
      <button mat-button (click)="resetForm()">Reset</button>
      <button mat-button cdkFocusInitial (click)="createNewPlaylist()">Create</button>
      <mat-progress-bar mode="determinate" [(value)]="uploadProgress" class="my-form-field"></mat-progress-bar>
    </div>
  </div>

  <div *ngIf="isAvatar">
    <h1 mat-dialog-title>Change Avatar</h1>
    <div mat-dialog-content class="position-relative width-height-100">
      <img src="{{imagePreview}}" class="imagePreview" alt="Image preview">
    </div>
    <div mat-dialog-actions>
      <button mat-button (click)="onNoClick()">Cancel</button>
      <button mat-button cdkFocusInitial (click)="uploadNewAvatar()">Change</button>
      <mat-progress-bar mode="determinate" [(value)]="uploadProgress" class="my-form-field"></mat-progress-bar>
    </div>
  </div>

  <div *ngIf="isAddToFaList">
    <h1 mat-dialog-title>Your Favorite Playlists</h1>
    <div mat-dialog-content>
      <mat-accordion>

        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              Create new playlist
            </mat-panel-title>
          </mat-expansion-panel-header>
          <mat-form-field class="width-100 my-form-field">
            <input matInput placeholder="Playlist Name" [(ngModel)]="name">
          </mat-form-field>
          <div mat-dialog-content class="d-flex justify-content-between align-items-center">
            <input type="file" (change)="onFileSelected($event)" accept="image/*" class="display-none" #openFile>
            <span>Choose Image: </span>
            <button mat-mini-fab class="my-form-field margin-5">
              <mat-icon class="material-icons color-dark-blue" (click)="openFile.click()">attach_file</mat-icon>
            </button>
          </div>
          <div mat-dialog-content *ngIf="haveImage">
            <div class="labelPreviewImage">
              <span class="loadImageName color-yellow">{{loadImage.name}}</span>
            </div>
            <div class="containerPreview position-relative">
              <img src="{{imagePreview}}" class="imagePreview" alt="preview">
            </div>
          </div>
          <div mat-dialog-actions>
            <button mat-button (click)="onNoClick()">No Thanks</button>
            <button mat-button cdkFocusInitial (click)="createNewPlaylist()">Ok</button>
            <mat-progress-bar mode="determinate" [(value)]="uploadProgress" class="my-form-field"></mat-progress-bar>
          </div>
        </mat-expansion-panel>

        <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
          [expanded]="panelOpenState">
          <mat-expansion-panel-header>
            <mat-panel-title>
              Choose a playlist
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div mat-dialog-content class="row d-flex just-content-center align-items-start flex-wrap">
            <div *ngFor="let item of faPlaylist"
              class="col-lg-4 col-md-6 col-sm-12 col-xs-12 d-flex just-content-center align-items-center flex-column padding-left-right-15">
              <img src="{{item.image}}" alt="image" class="img-playlist" (click)="addSongtofaList(item)">
              <div class="title-playlist">
                <h3>{{item.name}}</h3>
              </div>
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </div>
    <div mat-dialog-actions>
      <button mat-button (click)="onNoClick()" class="d-flex justify-content-center align-items-end">Cancel</button>
    </div>
  </div>
</div>

<div *ngIf="isVideo">
  <video width="100%" poster="data.data.imageVideo" controls>
    <source src="{{data.data.video}}" type="video/mp4">
  </video>
</div>
